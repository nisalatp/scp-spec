@startuml
title 01_system-components
left to right direction

package "SCP Core Platform" {
    component "API Gateway" as API
    component "AuthZ Service" as AuthZ
    component "Person Registry" as Person
    component "Household Registry" as Household
    component "Forms Engine" as Forms
}

package "Standard Verticals (Mandatory)" {
    component "Health & Env" as V_Health
    component "Education & Skills" as V_Edu
    component "Economy & Livelihood" as V_Econ
    component "Finance" as V_Fin
    component "Data (Base)" as V_Data
}

package "Custom Extensions" {
    component "Tenant Specific Verticals" as V_Custom
    note right of V_Custom
      Geo-specific logic
      (e.g., Flood Relief)
    end note
}


package "Shared Services (Lapse Resolution)" {
    component "GIS Service" as GIS
    component "Routing Service" as Route
    component "Simulation Service" as Sim
    component "Data Warehouse (OLAP)" as DW
}

database "PostgreSQL" as DB
database "PostGIS" as DB_GIS
database "Warehouse Store" as DB_OLAP

API --> AuthZ
API --> Person
API --> Household
API --> GIS : "Spatial Query"
API --> Route : "Travel Time"

' Vertical Dependencies
V_Health --> Person
V_Edu --> Person
V_Econ --> Person
V_Fin --> Person
V_Data --> Person

V_Custom --> Forms : "Dynamic Schema"
V_Custom --> GIS : "Hazard Check"

' Data Flow
Person --> DB
GIS --> DB_GIS
DW <-- DB : "CDC Sync"
V_Data --> DW : "Analytics Query"

@enduml
