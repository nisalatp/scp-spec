@startuml
title SCP - Person Entity Lifecycle (State Machine)
left to right direction

[*] --> Provisional : Registration (Offline/Online)

state Provisional {
  [*] --> DataCaptured
  DataCaptured --> PendingVerification : Sync to Cloud
  PendingVerification --> FlaggedDuplicate : Dedup Check Failed
}

Provisional --> Verified : Identity Validated
Provisional --> Rejected : Invalid / Fraud

state Verified {
  [*] --> Active
  Active --> Suspended : Consent Withdrawn
  Suspended --> Active : Consent Re-granted
  Active --> Restricted : Geo/Policy Review
}

Verified --> Archived : Soft Deleted
Verified --> Deceased : Death Certificate

Archived --> Active : Restored (Admin Only)
Deceased --> [*]

state "Integration Lifecycle (Connecting Systems)" as IntegrationStates {
  [*] --> Draft
  Draft --> Requested : Submit for Review
  Requested --> Reviewed : Vertical Owner Check
  Reviewed --> Approved : Umbrella Auth Check
  Approved --> Active : Keys Issued
  
  Active --> Suspended : Policy Violation
  Suspended --> Active : Resolved
  
  Active --> Deprecated : EOL Notice
  Deprecated --> Archived
}

@enduml
